# 理财计划系统 - 产品迭代路线图

## 📋 文档信息
- **版本**: v1.0
- **发布日期**: 2025-11-16
- **产品经理**: Claude
- **产品阶段**: MVP 开发中 (40% 完成)

---

## 一、产品愿景与战略目标

### 1.1 产品愿景
打造一款**智能化、自动化**的个人理财管理工具,让用户以"基金管理"的思维方式,轻松实现财务规划、资产配置和收益追踪。

### 1.2 核心价值主张
- **自动化分配**: 收入和收益无需手动计算,系统自动按比例分配
- **可视化管理**: 清晰展示各基金余额、投资状态和收益趋势
- **精细化控制**: 支持多基金、多产品的灵活配置和管理
- **安全可靠**: 事务处理保证数据一致性,精度控制避免计算误差

### 1.3 目标用户画像

| 用户类型 | 特征描述 | 核心需求 |
|---------|---------|---------|
| **理财新手** | 刚开始理财,对资金分配缺乏经验 | 简单易用的自动分配功能 |
| **进阶用户** | 有多个理财账户,需要统一管理 | 多产品投资管理和收益追踪 |
| **资深投资者** | 追求精细化管理和数据分析 | 详细报表、收益率分析、导出功能 |

---

## 二、当前状态分析

### 2.1 已完成功能 (40%)

✅ **基础架构层 (100%)**
- 完整的数据库设计 (7张核心表)
- 数据模型层和业务逻辑
- 核心算法: 收入分配、收益分配

✅ **基金管理模块 (100%)**
- CRUD 完整功能
- 后台管理界面

### 2.2 待开发功能 (60%)

🔲 **核心业务模块**
- 产品管理 (0%)
- 收入管理 (0%)
- 投资管理 (0%)
- 收益管理 (0%)

🔲 **用户体验**
- Dashboard 首页 (0%)
- 前台用户界面 (0%)

🔲 **增强功能**
- 数据统计和报表
- 图表可视化
- 导入导出

### 2.3 技术债务与风险

| 风险项 | 严重程度 | 应对措施 |
|-------|---------|---------|
| 缺少自动化测试 | 中 | 在迭代2中补充单元测试 |
| 前端交互体验待优化 | 低 | 迭代3引入现代前端框架 |
| 缺少数据备份机制 | 高 | 迭代1中添加数据导出功能 |
| 性能优化未验证 | 中 | 迭代2进行压力测试 |

---

## 三、产品迭代规划

### 迭代策略: 敏捷开发 + MVP 快速验证

```
MVP (v0.5) → 基础版 (v1.0) → 增强版 (v1.5) → 专业版 (v2.0)
   ↓              ↓                ↓                ↓
 核心闭环      完整功能        数据分析        智能推荐
```

---

## 3.1 迭代一: MVP 完整闭环 (v0.5)

**目标**: 实现核心业务流程,用户可完成"收入→分配→投资→收益→再分配"的完整闭环

**时间**: 2周 (80 工时)

### 核心任务

#### 优先级 P0 (必须完成)

| 功能模块 | 工作量 | 验收标准 |
|---------|--------|---------|
| **产品管理** | 16h | 完整 CRUD,支持产品类型分类 |
| **收入管理** | 16h | 录入收入,自动分配到基金,展示分配明细 |
| **投资管理** | 20h | 创建投资,余额检查,赎回功能,状态管理 |
| **收益管理** | 16h | 录入收益,自动按比例分配,展示分配明细 |
| **基础 Dashboard** | 12h | 总资产、各基金余额、最近交易记录 |

#### 优先级 P1 (重要但可延期)

| 功能模块 | 工作量 | 说明 |
|---------|--------|------|
| 数据导出 | 8h | 支持导出 Excel,防止数据丢失 |
| 搜索和筛选 | 6h | 各列表页添加日期、状态筛选 |

### 成功指标
- ✅ 用户可完成完整的理财管理流程
- ✅ 自动分配算法准确率 100%
- ✅ 所有金额计算精度误差 < 0.01元
- ✅ 核心功能页面加载时间 < 2秒

### 用户故事

**故事1: 收入自动分配**
```
作为用户,
当我录入一笔10万元的收入时,
系统应该自动按照我设定的比例(储蓄25%、教育8%、旅游10%、流动57%),
将钱分配到各个基金账户,
这样我就不用手动计算每个基金应该分多少钱。
```

**故事2: 投资理财产品**
```
作为用户,
当我想用储蓄基金投资余额宝时,
系统应该检查我的可用余额是否足够,
并在投资成功后更新我的可用余额,
这样我能清楚知道还有多少钱可以投资。
```

**故事3: 收益自动分配**
```
作为用户,
当我的理财产品产生了收益时,
系统应该自动计算每个基金在这个产品中投资的占比,
并按比例将收益分配回各个基金,
这样我就不用手动计算每个基金应该得多少收益。
```

---

## 3.2 迭代二: 可视化增强 (v1.0)

**目标**: 提升用户体验,增加数据可视化和分析功能

**时间**: 2周 (80 工时)

### 核心任务

#### 优先级 P0

| 功能模块 | 工作量 | 价值说明 |
|---------|--------|---------|
| **前台用户界面** | 24h | 提供更友好的查看界面,支持移动端访问 |
| **Dashboard 增强** | 16h | 添加收益趋势图、资产分布饼图 (Chart.js) |
| **数据统计** | 12h | 月度/年度收支汇总,收益率计算 |

#### 优先级 P1

| 功能模块 | 工作量 | 价值说明 |
|---------|--------|---------|
| 导入功能 | 8h | 支持批量导入收入/收益数据 |
| 响应式优化 | 12h | 移动端适配,提升触屏体验 |
| 快捷操作 | 8h | 常用操作快捷入口,减少点击次数 |

### 新增功能亮点

1. **可视化 Dashboard**
   - 资产总览卡片 (总资产、总收益、月收益率)
   - 基金余额饼图 (各基金占比)
   - 收益趋势折线图 (近12个月)
   - 投资产品分布图

2. **前台用户界面**
   - 简洁的资产查看页面
   - 各基金投资明细
   - 收益历史记录
   - 移动端适配

### 成功指标
- ✅ Dashboard 加载时间 < 1.5秒
- ✅ 移动端访问占比 > 30%
- ✅ 用户平均停留时间 > 3分钟
- ✅ 图表渲染成功率 100%

---

## 3.3 迭代三: 智能分析 (v1.5)

**目标**: 提供深度数据分析和智能洞察

**时间**: 2周 (80 工时)

### 核心任务

| 功能模块 | 工作量 | 价值说明 |
|---------|--------|---------|
| **收益率分析** | 16h | 各基金、各产品收益率对比 |
| **月度报表** | 16h | 自动生成月度收支报表、收益报表 |
| **标签和分类** | 12h | 支持自定义收入来源、支出类别 |
| **预算管理** | 16h | 设置各基金预算,超支提醒 |
| **单元测试** | 20h | 补充核心业务逻辑单元测试,提高稳定性 |

### 新增功能亮点

1. **收益分析模块**
   - 各基金年化收益率
   - 各理财产品收益对比
   - 投资回报率 (ROI) 计算
   - 最佳/最差投资产品排行

2. **智能报表**
   - 月度收支汇总表
   - 基金余额变动报表
   - 投资产品明细表
   - 支持 PDF/Excel 导出

3. **预算控制**
   - 设置月度预算
   - 超支预警
   - 预算执行进度

### 成功指标
- ✅ 报表生成时间 < 3秒
- ✅ 收益率计算准确率 100%
- ✅ 用户活跃度提升 20%

---

## 3.4 迭代四: 专业版 (v2.0)

**目标**: 面向专业用户,提供高级功能和自动化能力

**时间**: 3周 (120 工时)

### 核心任务

| 功能模块 | 工作量 | 价值说明 |
|---------|--------|---------|
| **定期收益自动录入** | 20h | 自动抓取理财产品收益 (爬虫/API) |
| **权限管理 (RBAC)** | 20h | 支持多用户、权限分级 |
| **API 接口** | 24h | 提供 RESTful API,支持第三方集成 |
| **智能提醒** | 16h | 到期提醒、异常提醒、建议推送 |
| **数据备份与恢复** | 12h | 自动备份,一键恢复 |
| **性能优化** | 20h | 缓存优化、数据库索引优化、压力测试 |

### 新增功能亮点

1. **自动化能力**
   - 自动抓取余额宝、理财通等收益
   - 定时任务调度
   - 邮件/微信通知

2. **企业级功能**
   - 多用户权限管理
   - 操作日志审计
   - 数据加密存储

3. **开放平台**
   - RESTful API
   - Webhook 支持
   - 第三方应用集成

### 成功指标
- ✅ API 响应时间 < 500ms
- ✅ 自动收益抓取成功率 > 95%
- ✅ 系统可用性 > 99.5%
- ✅ 支持 1000+ 用户并发

---

## 四、功能优先级评估

### 4.1 RICE 评分模型

| 功能 | Reach (触达) | Impact (影响) | Confidence (信心) | Effort (工时) | **RICE 分数** | 优先级 |
|-----|------------|-------------|-----------------|-------------|------------|--------|
| 收入管理 | 100 | 3 | 100% | 16 | **18.75** | P0 |
| 投资管理 | 100 | 3 | 100% | 20 | **15.00** | P0 |
| 收益管理 | 100 | 3 | 100% | 16 | **18.75** | P0 |
| 产品管理 | 100 | 2 | 100% | 16 | **12.50** | P0 |
| Dashboard | 100 | 2 | 90% | 12 | **15.00** | P0 |
| 前台界面 | 80 | 2 | 80% | 24 | **5.33** | P1 |
| 数据可视化 | 80 | 2 | 100% | 16 | **10.00** | P1 |
| 收益分析 | 60 | 2 | 80% | 16 | **6.00** | P1 |
| 预算管理 | 50 | 2 | 70% | 16 | **4.38** | P2 |
| 自动抓取 | 40 | 3 | 60% | 20 | **3.60** | P2 |

**说明**:
- Reach: 0-100,影响用户比例
- Impact: 1-3,对用户的影响程度
- Confidence: 0-100%,对评估的信心
- Effort: 工时数
- RICE = (Reach × Impact × Confidence) / Effort

### 4.2 优先级定义

- **P0 (必须)**: RICE > 12,核心业务流程,缺失则产品不可用
- **P1 (重要)**: 5 < RICE < 12,显著提升用户体验
- **P2 (可选)**: RICE < 5,锦上添花的功能

---

## 五、里程碑和时间规划

### 整体时间线 (16周)

```
周次  1  2  3  4  5  6  7  8  9  10 11 12 13 14 15 16
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
v0.5  ████████████████                                  迭代一
v1.0              ████████████████                      迭代二
v1.5                          ████████████████          迭代三
v2.0                                      ██████████████ 迭代四
```

### 关键里程碑

| 里程碑 | 目标日期 | 验收标准 |
|-------|---------|---------|
| **M1: MVP 发布** | Week 4 | 核心业务流程可用,用户可完成完整操作 |
| **M2: Beta 测试** | Week 8 | 前台界面完成,开放内测 |
| **M3: v1.0 正式版** | Week 10 | 数据可视化完成,稳定性验证 |
| **M4: v1.5 增强版** | Week 12 | 分析报表完成,单元测试覆盖 > 70% |
| **M5: v2.0 专业版** | Week 16 | 自动化功能、API 接口完成 |

---

## 六、技术方案与架构优化

### 6.1 前端技术选型建议

| 方案 | 优势 | 劣势 | 建议 |
|-----|------|------|------|
| **Yii2 原生视图** | 无需学习成本,快速开发 | 交互体验较弱 | **迭代一采用** |
| **Bootstrap + jQuery** | 组件丰富,兼容性好 | 现代感不足 | 迭代二可考虑 |
| **Vue.js + Element UI** | 现代化交互,组件完善 | 需要前后端分离 | 迭代三/四采用 |

### 6.2 数据库优化

```sql
-- 建议添加索引
CREATE INDEX idx_income_date ON income(income_date);
CREATE INDEX idx_investment_status ON investment(status);
CREATE INDEX idx_return_date ON return_record(return_date);

-- 分区表 (当数据量 > 100万时)
ALTER TABLE income PARTITION BY RANGE (YEAR(income_date));
```

### 6.3 性能优化方案

1. **缓存策略**
   - Redis 缓存基金余额 (TTL: 5分钟)
   - 页面片段缓存 (Dashboard)

2. **数据库优化**
   - 慢查询优化
   - 连接池配置
   - 读写分离 (v2.0)

3. **前端优化**
   - 图片懒加载
   - 资源压缩和合并
   - CDN 加速 (v2.0)

---

## 七、风险管理与应对

### 7.1 技术风险

| 风险 | 概率 | 影响 | 应对措施 |
|-----|------|------|---------|
| 数据精度问题 | 中 | 高 | 使用 decimal 类型,单元测试验证 |
| 并发更新冲突 | 低 | 高 | 使用乐观锁或悲观锁 |
| 第三方 API 不稳定 | 高 | 中 | 添加重试机制,降级方案 |
| 性能瓶颈 | 中 | 中 | 提前压力测试,预留优化时间 |

### 7.2 业务风险

| 风险 | 概率 | 影响 | 应对措施 |
|-----|------|------|---------|
| 用户需求变更 | 高 | 中 | 敏捷开发,2周一个迭代快速调整 |
| 数据丢失 | 低 | 高 | 自动备份,导出功能优先实现 |
| 用户接受度低 | 中 | 高 | MVP 快速验证,收集用户反馈 |

---

## 八、成功指标与监控

### 8.1 产品指标 (北极星指标: DAU/MAU)

| 指标类别 | 指标名称 | 目标值 | 当前值 |
|---------|---------|--------|--------|
| **用户活跃** | DAU (日活) | 100 | 0 |
| **用户活跃** | MAU (月活) | 500 | 0 |
| **功能使用** | 收入录入次数/周 | 2 | - |
| **功能使用** | 投资操作次数/月 | 5 | - |

### 8.2 技术指标

| 指标类别 | 指标名称 | 目标值 | 当前值 |
|---------|---------|--------|--------|
| **性能** | 页面加载时间 | < 2s | - |
| **性能** | API 响应时间 | < 500ms | - |
| **稳定性** | 系统可用性 | > 99% | - |
| **质量** | 单元测试覆盖率 | > 70% | 0% |

### 8.3 业务指标

| 指标类别 | 指标名称 | 目标值 |
|---------|---------|--------|
| **数据准确性** | 金额计算准确率 | 100% |
| **自动化率** | 自动分配成功率 | 100% |
| **用户留存** | 次日留存率 | > 40% |
| **用户留存** | 7日留存率 | > 30% |

---

## 九、资源需求与团队配置

### 9.1 人力需求

| 角色 | 人数 | 职责 |
|-----|------|------|
| **产品经理** | 1 | 需求管理、优先级决策、用户反馈 |
| **后端开发** | 1 | 控制器、业务逻辑、API 开发 |
| **前端开发** | 0.5 | 视图优化、图表集成 (可兼任) |
| **测试工程师** | 0.5 | 功能测试、性能测试 (可兼任) |

### 9.2 预算估算

| 成本项 | 费用 | 说明 |
|-------|------|------|
| 开发成本 | ¥40,000 | 按 280 工时 × ¥150/小时 |
| 服务器成本 | ¥2,000/年 | 云服务器 + 数据库 |
| 第三方服务 | ¥1,000/年 | CDN、短信、邮件服务 |
| **总计** | **¥43,000** | 第一年总成本 |

---

## 十、下一步行动计划

### 10.1 立即执行 (本周)

- [ ] 召集团队,对齐产品路线图
- [ ] 确认开发环境和数据库配置
- [ ] 创建迭代一的详细任务分解 (WBS)
- [ ] 搭建项目管理工具 (Jira/Trello/GitHub Project)

### 10.2 迭代一启动准备 (Week 1)

**第1天**: 产品管理模块
- [ ] 创建 ProductController 和基础 CRUD
- [ ] 设计产品列表和详情页视图
- [ ] 添加产品分类功能

**第2-3天**: 收入管理模块
- [ ] 创建 IncomeController
- [ ] 实现收入录入表单
- [ ] 集成自动分配算法
- [ ] 展示分配明细

**第4-5天**: 投资管理模块
- [ ] 创建 InvestmentController
- [ ] 实现投资创建和赎回功能
- [ ] 添加余额检查逻辑
- [ ] 投资状态管理

**第6-7天**: 收益管理模块
- [ ] 创建 ReturnController
- [ ] 实现收益录入表单
- [ ] 集成按比例分配算法
- [ ] 展示分配明细

**第8-9天**: Dashboard 首页
- [ ] 总资产统计卡片
- [ ] 各基金余额展示
- [ ] 最近交易记录列表

**第10天**: 测试和优化
- [ ] 功能测试
- [ ] 修复 Bug
- [ ] 性能优化

### 10.3 用户验证计划

- **Week 4**: 邀请 3-5 位种子用户内测
- **Week 6**: 收集反馈,调整优先级
- **Week 8**: Beta 测试,扩大到 20-30 用户
- **Week 10**: 正式发布 v1.0

---

## 十一、附录

### 11.1 术语表

| 术语 | 定义 |
|-----|------|
| **基金** | 用户自定义的资金账户,如储蓄基金、教育基金等 |
| **分配比例** | 收入自动分配到各基金的百分比 |
| **投资** | 从基金账户投资到理财产品的金额 |
| **收益** | 理财产品产生的收益,按投资比例分配回基金 |
| **可用余额** | 基金当前余额 - 已投资金额 |

### 11.2 参考资料

- [Yii2 官方文档](https://www.yiiframework.com/doc/guide/2.0/zh-cn)
- [Chart.js 文档](https://www.chartjs.org/docs/)
- [RICE 优先级模型](https://www.intercom.com/blog/rice-simple-prioritization-for-product-managers/)
- [敏捷开发最佳实践](https://www.atlassian.com/agile)

### 11.3 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|-----|------|---------|------|
| v1.0 | 2025-11-16 | 初始版本发布 | Claude |

---

## 📞 联系方式

如对本路线图有任何疑问或建议,请联系产品团队:

- **产品讨论**: 提交 GitHub Issue
- **功能建议**: 在项目 Wiki 中提交
- **技术支持**: 查看 PROJECT_GUIDE.md

---

**最后更新**: 2025-11-16
**下次评审**: 2025-12-01 (每两周评审一次)
